name: Upload Mod to Steam

on:
  push:
    branches:
      - mod

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: steam-workshop-upload
        uses: Weilbyte/steam-workshop-upload@v1.1
        with: 
          appid: 1201540 # Game's Steam App ID
          itemid: 3538327453 # Your mod's Steam Workshop ID
          path: 'ccg_mod' # Path to your mod's folder from repository root
          changenote: '${{ github.event.head_commit.message }}'
        env:
          STEAM_USERNAME: ${{ secrets.STEAM_USERNAME }} # Your Steam username
          STEAM_PASSWORD: ${{ secrets.STEAM_PASSWORD }} # Your Steam password
          STEAM_TFASEED: ${{ secrets.STEAM_TFASEED }} # Your Steam Guard 2FA shared secret (Optional)
